<!DOCTYPE html><html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>MSTR Analytics Dashboard</title>
<style>
  body{font-family:system-ui,Segoe UI,Arial;padding:24px;background:#0b0e17;color:#e8e8e8}
  .wrap{max-width:1200px;margin:auto}
  h1{margin:0 0 4px;background:linear-gradient(45deg,#f39c12,#e74c3c);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .last{color:#bbb;margin-bottom:16px}
  .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:16px;margin:12px 0}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
  .metric{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(255,255,255,.08)}
  .metric:last-child{border-bottom:none}
  .rec{background:rgba(46,204,113,.08);border-color:#2ecc71}
  .title{color:#f39c12;font-weight:600;margin-bottom:8px}
</style>
</head><body>
<div class="wrap">
  <h1>MSTR Analytics Dashboard</h1>
  <div class="last" id="last">Loading…</div>

  <div class="card">
    <div class="title">Raw Data</div>
    <div class="metric"><span>Current BTC Price</span><span id="btc">$—</span></div>
    <div class="metric"><span>Current MSTR Price</span><span id="mstr">$—</span></div>
    <div class="metric"><span>NAV Floor (Basic Shares)</span><span id="nav">$—</span></div>
  </div>

  <div class="card">
    <div class="title">Catalysts ▸ Future Timeline</div>
    <table id="timeline" style="width:100%;border-collapse:collapse;font-size:14px">
      <thead><tr style="color:#f39c12;text-align:left">
        <th>Horizon</th><th>Catalyst</th><th>Date / Window</th><th>Prob</th><th>Impact</th><th>NGU</th>
      </tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="card rec">
    <div class="title">Daily Trade Recommendation</div>
    <div id="trade">Waiting for data…</div>
  </div>
</div>

<script>
(async function(){
  try{
    const res = await fetch('data.json',{cache:'no-store'});
    const d = await res.json();

    // timestamp
    document.getElementById('last').textContent = 'Last Revised: ' + d.as_of;

    // raw data
    const fmt = x => (typeof x==='number' ? x.toLocaleString(undefined,{maximumFractionDigits:2}) : x);
    document.getElementById('btc').textContent  = '$' + fmt(d.raw_data.btc_price);
    document.getElementById('mstr').textContent = '$' + fmt(d.raw_data.mstr_price);
    document.getElementById('nav').textContent  = '$' + fmt(d.raw_data.nav_floor_basic);

    // timeline
    const tb = document.querySelector('#timeline tbody'); tb.innerHTML='';
    (d.catalysts?.future?.timeline || []).forEach(r=>{
      const tr=document.createElement('tr');
      tr.innerHTML = `<td>${r.horizon||''}</td><td>${r.catalyst||''}</td><td>${r.date||''}</td>
                      <td>${r.prob||''}</td><td>${r.impact||''}</td><td>${r.ngu||''}</td>`;
      tr.querySelectorAll('td').forEach(td=>td.style.borderBottom='1px solid rgba(255,255,255,.08)');
      tb.appendChild(tr);
    });

    // trade note
    document.getElementById('trade').textContent = d.trade?.recommendation_text || '—';
  }catch(e){
    document.getElementById('last').textContent='Could not load data.json';
    console.error(e);
  }
})();
</script>
</body></html>
